<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PS INCLUDE</title>
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="body">
    <header class="header">
        <img class="logo_header" src="./assets/logoHeader.svg" alt="Logo do cabeçalho">
    </header>

    
    <section class="feed">
        <div class="main">

            <div class="newPost">
                <img src="./assets/logoNewPost.svg" alt="Ícone de novo post">
                <form action="" method="post" class="formNewPost">
                    <div class="texts">
                        <textarea id="title" class="title" placeholder="Escreva seu tema..."></textarea>
                        <textarea id="publication" class="publication" placeholder="Escreva sua publicação..."></textarea>  
                    </div>
                
                    <div class="buttons">
                        <button id= "addimg1" onclick="getPublish()" class="button1">Adicionar imagem <img src="./assets/image.svg" alt="Ícone de imagem"></button>
                        <button id= "publish1" onclick="addPublish()" class="button2">Publicar <img src="./assets/log-out.svg" alt="Ícone de publicar"></button>
                    </div>
                </form>
            </div>

            <div class="post">
                <div class="user">
                    <img src="./assets/logoNewPost.svg" class="logoPost" alt="Logo do post">
                    <div class="username">
                        <h1 class="namePost">Include Jr</h1>
                        <span class="descriptionName">Dev. web | soluções inovadoras</span>       
                    </div>
                </div>
            <div class="descriptionPost">
                <h1 id="tema" class="titlePost">Tema Lorem Ipsum</h1>
                <p id="msg" class="contentPost">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida sodales consequat. Curabitur condimentum congue felis eget congue. Fusce sed magna nec sem luctus dictum id at nibh. 
                </p>
                <img class="postImage" src="./assets/imagenone.png" alt="Imagem do post">
                <div class="buttons">
                    <button id= "addimg2" onclick="addImage()" class="button1">Adicionar imagem <img src="./assets/image.svg" alt="Ícone de imagem"></button>
                    <button id= "publish2" onclick="addPublish()" class="button2">Publicar <img src="./assets/log-out.svg" alt="Ícone de publicar"></button>
                </div>
            </div>

            </div>

    </div> 

    <div class="recent">
        <div class="recents">
        <h1 class="titlesection">Ultimas publicações</h1>
        <div class="postsrecents">
            <h2 id= "firstpubli" class="article"></h2>
            <h2 id= "secondpubli" class="article"></h2>
            <h2 id= "thirdpubli" class="article"></h2>
        </div>   
        </div>
       
     <h1 class="copyright">Direitos reservados à empresa Include Jr.</h1>    
    </div>
   
</section>

<footer class="footer">
    <img src="./assets/logoHeader.svg" alt="Logo do rodapé">
    <span class="textFooter">Direitos reservados à empresa Include Jr.</span>
    <div class="icons">
        <img src="./assets/mail.svg" alt="Ícone de e-mail">
        <img src="./assets/linkedin.svg" alt="Ícone do LinkedIn">
        <img src="./assets/instagram.svg" alt="Ícone do Instagram"> 
    </div>
</footer>

<script>
window.onload = function() {
    fetchNews();
};

function fetchNews() {
    axios.get('http://localhost:3000/noticias')
        .then(function (response) {
            // Supondo que a resposta seja um array de notícias
            const noticias = response.data;
            updateNewsList(noticias);
        })
        .catch(function (error) {
            console.log(error);
        });
}

function updateNewsList(noticias) {
    if (noticias.length > 0) {
        // Assume que cada notícia tem 'titulo' e 'conteudo'
        document.getElementById('firstpubli').textContent = noticias[0] ? noticias[0].titulo : '';
        document.getElementById('secondpubli').textContent = noticias[1] ? noticias[1].titulo : '';
        document.getElementById('thirdpubli').textContent = noticias[2] ? noticias[2].titulo : '';
    } else {
        console.log('Não há notícias para mostrar');
    }
}
</script>
</body>
</html>
